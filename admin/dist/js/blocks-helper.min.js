(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,a=window.React;var n=e.n(a);const c=window.wp.blockEditor,o=window.wp.components,r=window.wp.richText,i=window.wp.i18n;var l,s,m,v;function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d.apply(this,arguments)}const u=function(e){return a.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 1200"},e),l||(l=a.createElement("path",{d:"M788 975H188c-21 0-38-17-38-37v-75a38 38 0 0 0-75 0v75c0 62 50 112 113 112h600a38 38 0 0 0 0-75z"})),s||(s=a.createElement("path",{d:"M675 863v150a38 38 0 0 0 75 0V863a38 38 0 0 0-75 0zM225 188v675a38 38 0 0 0 75 0V188a38 38 0 0 0-75 0z"})),m||(m=a.createElement("path",{d:"M750 825V674a38 38 0 0 1 75 0v189c0 20-17 37-37 37H113c-21 0-38-17-38-37V263c0-63 50-113 113-113h225a38 38 0 0 1 0 75H188c-21 0-38 17-38 38v562zm139-337h-27c-20 0-37-17-37-38V300c0-21 17-37 37-37h225c21 0 38 16 38 37v153c-1 96-48 135-86 174-7 7-17 11-27 11H900a38 38 0 0 1-36-47l25-103zm161-40V337H900v75h38a38 38 0 0 1 36 47l-26 104h49c25-25 53-53 53-113v-2z"})),v||(v=a.createElement("path",{d:"M514 488h-27c-20 0-37-17-37-38V300c0-21 17-37 37-37h225c21 0 38 16 38 37v153c-1 96-48 135-86 174-7 7-17 11-27 11H525a38 38 0 0 1-36-47l25-103zm161-40V337H525v75h38a38 38 0 0 1 36 47l-26 104h49c25-25 53-53 53-113v-2z"})))},p={name:"wpm-format/cite",title:(0,i.__)("Cite","citations"),keywords:[(0,i.__)("bibliography"),(0,i.__)("source")],tagName:"span",className:"js--wpm-format-cite",attributes:{citeText:"data-cite-text"},edit:e=>{var a,l;const{isActive:s,onChange:m,value:v,contentRef:d,activeAttributes:w}=e,h=(0,r.useAnchor)({editableContentElement:d.current,value:v,settings:p}),[b,E]=(0,t.useState)(!1),[_,f]=(0,t.useState)(!1),[g,y]=(0,t.useState)(),[k,x]=(0,t.useState)(!1);(0,t.useEffect)((()=>{s?E(!0):s||_||(E(!1),x(!1))}),[s,_]),(0,t.useEffect)((()=>{y(w),x(!1)}),[w]);return n().createElement(n().Fragment,null,n().createElement(c.RichTextToolbarButton,{title:(0,i.__)("Cite","citations"),icon:u,onClick:()=>{m((0,r.toggleFormat)(v,{type:p.name})),x(!0)},isActive:s}),b&&n().createElement(o.Popover,{anchor:h,focusOnMount:!1,noArrow:!1,position:"bottom center",onFocus:()=>{f(!0)},offset:8,onBlur:()=>{f(!1)}},n().createElement("div",{className:"block-editor-cite-control"},n().createElement("div",{className:"block-editor-cite-control__field"},!k&&n().createElement("div",{className:"block-editor-cite-control__preview"},n().createElement("div",{className:"block-editor-cite-control__preview-text"},null!==(a=w.citeText)&&void 0!==a?a:n().createElement("span",{className:"no-cite-text"},(0,i.__)("Please set a citation","citations"))),n().createElement(o.Button,{variant:"link",icon:"edit",onClick:()=>{x(!0)}})),k&&n().createElement("div",{className:"block-editor-cite-control__edit"},n().createElement(o.TextControl,{value:null!==(l=g.citeText)&&void 0!==l?l:"",onChange:e=>{y({...g,citeText:e})}}),n().createElement(o.Button,{variant:"primary",icon:"editor-break",onClick:()=>{(()=>{const e={...w,...g},t=(0,r.applyFormat)(v,{type:p.name,attributes:e});m(t)})(),x(!1)}}))))))}};(0,r.registerFormatType)(p.name,p)})();